Parte 0.1 - Parte III
---------------------

Recuerda que en esta práctica tenemos dos directorios (que no paquetes) con distintas partes del proyecto. Debido a esta estructura, para compilar el programa completo será necesario modificar el classpath para que el compilador de Java encuentra todas las clases necesarias. Además, como los ficheros se han escrito con codificación UTF-8, vamos a indicarle esto al compilador para lo tenga en cuenta.

En primer lugar, vamos a compilar la parte del código que corresponde a la librería de funciones

    javac -encoding utf-8 libreria\practica0\estadisticas\Media.java

Si la compilación ha sido correcta, se habrá creado un fichero .class en el directorio libreria\practica0\estadistica. Recordemos que tal y como está declarada la clase Media, esta se encuentra en un el paquete practica0.estadisticas, que a su vez está dentro de un directorio libreria.

A continuación, vamos a compilar el programa principal que se encuentra en el paquete "practica0", que a su vez está en el directorio (no paquete) "main". Para que esta clase pueda ser compilada por javac es necesario que pueda encontrar las clases a las que hace referencia, que en este caso es la clase Media, además de las librerías básicas de Java. Por lo tanto, en la compilación vamos a indicarle que busque también clases en el directorio "libreria".

    javac -encoding utf-8 -classpath libreria\ main\practica0\Practica0.java

Si hemos compilado todas las clases sin errores podemos lanzar el programa indicando la clase donde se encuentra el programa principal. Comprueba, además, que se han creado los ficheros .class correspondiente a cada clase compilada.
Debemos tener en cuenta que ahora utilizamos el "fully qualified name" de la clase principal y no el nombre del fichero (*.java). Prueba el siguiente comando, que te deberá dar un error

    cd main
    java practica0.Practica0

El comando anterior para lanzar la clase principal con Java nos dará un error debido a que en ejecución no está encontrando todas las clases que necesita. En concreto el error es 

Exception in thread "main" java.lang.NoClassDefFoundError: practica0/estadisticas/Media
        at practica0.Practica0.main(Practica0.java:18)
Caused by: java.lang.ClassNotFoundException: practica0.estadisticas.Media
        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:581)
        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178)
        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)
        ... 1 more

Recordemos que el programa está en varias partes en distintos directorios, aunque anteriormente hemos resuelto la compilación ahora debemos también recordar que la máquina virtual de Java lanzada con el comando "java" no sabe dónde buscar todos los .class que le hacen falta, siendo necesario que se lo indiquemos con el classpath. En este caso debemos recordar que también es necesario indicar el directorio actual (normalmente representado con un punto). Suponiendo que estemos ya situados dentro del directorio "main"

     java -cp ".;..\libreria" practica0.Practica0

Incluso podríamos configurar la variable de entorno CLASSPATH para que todas las ejecuciones de la máquina virtual de Java que se hagan tengan preconfigurado el classpath donde buscar las clases. En este caso vamos también a incluir el directorio main en la variable de entorno para que podamos ejecutar el programa main desde cualquier lado. Así, en la línea de comandos de Windows 10 podemos establecer la variable de entorno

    set CLASSPATH=<ruta al directorio 'main'>;<ruta al directorio 'libreria'>

Ahora podríamos ejecutar el programa desde cualquier lugar encontrando todas las clases necesarias ya que se han añadido sus directorios al classpath.

    java practica0.Practica0

La configuración del classpath de esta forma se borra al cerrar el CMD, pero podríamos añadirla como variable de entorno de Windows en la configuración del sistema operativo para que se mantenga siempre, en el caso de que sea necesario.

